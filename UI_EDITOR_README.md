# Визуальный редактор UI лаунчера

## Описание

Визуальный редактор UI предоставляет возможность создания и редактирования пользовательского интерфейса лаунчера в режиме реального времени. Редактор поддерживает drag & drop, визуальное редактирование свойств и предварительный просмотр.

## Функциональность

### Основные возможности
- **Drag & Drop редактирование** - перетаскивание элементов мышью
- **Панель инспектора свойств** - редактирование всех свойств элементов
- **Панель инструментов** - быстрое добавление новых элементов
- **Сетка и привязка** - точное позиционирование элементов
- **Предварительный просмотр** - просмотр результата в отдельном окне
- **Сохранение/загрузка проектов** - работа с конфигурационными файлами
- **Экспорт в Python** - генерация готового кода

### Поддерживаемые элементы UI
1. **Кнопки** - интерактивные элементы управления
2. **Текстовые метки** - статический текст
3. **Прогресс-бары** - индикаторы прогресса
4. **Изображения** - графические элементы

### Редактируемые свойства
- Позиция (x, y) и размер (width, height)
- Текст и шрифт (семейство, размер)
- Цвета (фон, текст, рамка)
- Стили рамки (толщина, радиус)
- Прозрачность и видимость

## Установка и запуск

### Требования
- Python 3.6+
- PyQt5
- Все модули из основного лаунчера

### Способы запуска

#### 1. Через основной лаунчер
```python
# В лаунчере должна быть кнопка "Редактор UI"
# Если кнопки нет, добавьте в launcher.ui файл:
# <widget class="QPushButton" name="ui_editor_button">
```

#### 2. Отдельный запуск
```bash
python ui_editor_launcher.py
```

#### 3. Прямой импорт
```python
from ui_editor import launch_ui_editor
launch_ui_editor()
```

## Использование

### Создание нового дизайна
1. Запустите редактор
2. Используйте панель инструментов слева для добавления элементов
3. Перетаскивайте элементы в нужные позиции
4. Редактируйте свойства в панели справа
5. Сохраните проект (Ctrl+S)

### Редактирование существующего дизайна
1. Откройте файл: Файл → Открыть
2. Выберите .ui.json файл
3. Редактируйте элементы
4. Сохраните изменения

### Применение к лаунчеру
1. Сохраните дизайн как `а`
2. Перезапустите лаунчер
3. Изменения будут применены автоматически

## Работа с элементами

### Добавление элементов
- Нажмите кнопку нужного типа элемента в левой панели
- Элемент появится на холсте
- Настройте его свойства в правой панели

### Выделение и перемещение
- Кликните по элементу для выделения
- Перетаскивайте выделенный элемент мышью
- Используйте угол элемента для изменения размера

### Контекстное меню
- ПКМ по холсту → контекстное меню
- Опции: удалить элемент, копировать, настройки сетки

### Горячие клавиши
- `Ctrl+N` - новый проект
- `Ctrl+O` - открыть проект
- `Ctrl+S` - сохранить проект
- `Ctrl+Shift+S` - сохранить как
- `Del` - удалить выделенный элемент

## Форматы файлов

### Файл проекта (.ui.json)
```json
{
  "version": "1.0",
  "widgets": [
    {
      "type": "button",
      "properties": {
        "x": 100,
        "y": 50,
        "width": 150,
        "height": 35,
        "text": "Кнопка",
        "font_family": "Arial",
        "font_size": 12,
        "background_color": "#4CAF50",
        "text_color": "#ffffff"
      }
    }
  ],
  "canvas_settings": {
    "grid_size": 10,
    "show_grid": true,
    "snap_to_grid": true
  }
}
```

### Автосохранение
- Каждые 30 секунд создается .backup файл
- При сбое можно восстановить из бэкапа

## Интеграция с лаунчером

### Применение конфигурации
Лаунчер автоматически ищет файл `launcher_ui_config.ui.json` и применяет настройки к существующим элементам.

### Сопоставление элементов
- **Кнопки**: по тексту ("Играть", "Пауза", "Откат")
- **Метки**: по тексту ("Version", название сервера)

### Файл launcher.ui
Для полной интеграции добавьте в launcher.ui:
```xml
<widget class="QPushButton" name="ui_editor_button">
  <property name="text">
    <string>Редактор UI</string>
  </property>
</widget>
```

## Экспорт и импорт

### Экспорт в Python
Файл → Экспорт в Python создает готовый код:
```python
class GeneratedUI(QWidget):
    def __init__(self, parent=None):
        super().__init__(parent)
        self.setup_ui()
    
    def setup_ui(self):
        self.button_0 = QPushButton(self)
        self.button_0.setGeometry(100, 50, 150, 35)
        self.button_0.setText('Кнопка')
        # ... остальной код
```

### Импорт изображений
- Поддерживаются форматы: PNG, JPG, JPEG, GIF, BMP
- Изображения масштабируются автоматически
- Три режима масштабирования: KeepAspectRatio, ScaleToFit, IgnoreAspectRatio

## Устранение неполадок

### Редактор не запускается
1. Проверьте наличие файла `ui_editor.py`
2. Убедитесь в установке PyQt5
3. Проверьте права доступа к файлам

### Конфигурация не применяется
1. Проверьте название файла: `launcher_ui_config.ui.json`
2. Убедитесь в корректности JSON синтаксиса
3. Проверьте совпадение имен элементов

### Элементы отображаются неправильно
1. Проверьте разрешение экрана
2. Убедитесь в правильности координат
3. Проверьте размеры элементов

## Расширение функциональности

### Добавление новых типов элементов
1. Создайте класс наследник от `DraggableWidget`
2. Добавьте его в `WidgetToolbox.setup_ui()`
3. Обработайте в `DesignCanvas.add_widget()`

### Добавление новых свойств
1. Расширьте словарь `properties` в базовом классе
2. Добавьте редактор в `ElementInspector.create_property_editor()`
3. Обработайте в `DraggableWidget.update_appearance()`

## Лицензия

Это приложение является частью лаунчера и распространяется на тех же условиях.