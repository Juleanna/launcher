# Веб-контент в лаунчере

Лаунчер теперь поддерживает отображение веб-контента (новостей, обновлений) в табах интерфейса.

## Возможности

- **Автоматическая загрузка новостей** из различных источников
- **Поддержка форматов**: JSON, RSS, HTML
- **Автообновление** с настраиваемым интервалом
- **Кэширование** для быстрой загрузки
- **Стилизованный интерфейс** с прозрачным фоном

## Настройка источников новостей

Источники новостей настраиваются в файле `launcher_config.ini`:

### Общие настройки веб-контента
```ini
[WebContent]
auto_refresh = 1           # Включить автообновление (1/0)
refresh_interval = 300     # Интервал обновления в секундах (5 минут)
```

### Пример источника JSON
```ini
[NewsSource1]
name = Новости сервера     # Название таба
url = https://example.com/api/news.json
type = json
enabled = 1               # Включен (1) или выключен (0)
```

### Пример источника RSS
```ini
[NewsSource2]
name = Обновления
url = https://example.com/rss/updates.xml
type = rss
enabled = 1
```

### Пример источника HTML
```ini
[NewsSource3]
name = События
url = https://example.com/events.html
type = html
enabled = 0               # Отключен по умолчанию
```

## Поддерживаемые форматы

### JSON Feed
Ожидаемая структура JSON:
```json
{
  "items": [
    {
      "title": "Заголовок новости",
      "content_html": "<p>HTML контент новости</p>",
      "date_published": "2023-12-01T10:00:00Z",
      "url": "https://example.com/news/1",
      "author": {
        "name": "Автор"
      }
    }
  ]
}
```

Альтернативный формат:
```json
{
  "posts": [
    {
      "title": "Заголовок",
      "content": "Текстовый контент",
      "date": "2023-12-01",
      "link": "https://example.com/news/1",
      "author": "Автор"
    }
  ]
}
```

### RSS Feed
Стандартный RSS 2.0 формат:
```xml
<rss version="2.0">
  <channel>
    <title>Новости</title>
    <item>
      <title>Заголовок новости</title>
      <description>Описание новости</description>
      <link>https://example.com/news/1</link>
      <pubDate>Mon, 01 Dec 2023 10:00:00 GMT</pubDate>
    </item>
  </channel>
</rss>
```

### HTML
Для HTML страниц модуль пытается автоматически извлечь:
- Заголовок из `<h1>` или `<title>` тега
- Основной контент из `<p>`, `<div>`, `<article>` тегов

## Безопасность

- Все HTTP URL автоматически перенаправляются на HTTPS
- Ограничение размера загружаемого контента
- Таймауты для предотвращения зависания
- Обработка ошибок сети

## Зависимости

Добавлены в `requirements.txt`:
- `html2text>=2020.1.16` - для конвертации HTML в текст
- `beautifulsoup4>=4.9.0` - для продвинутого парсинга HTML (опционально)

## Установка зависимостей

```bash
pip install html2text beautifulsoup4
```

## Использование

1. Настройте источники новостей в `launcher_config.ini`
2. Запустите лаунчер
3. Новости появятся в табах виджета "info"
4. Контент обновляется автоматически каждые 5 минут (по умолчанию)

## Устранение неполадок

### Новости не загружаются
- Проверьте доступность URL в браузере
- Убедитесь, что `enabled = 1` в настройках источника
- Проверьте логи лаунчера на наличие ошибок

### Неправильный формат новостей
- Убедитесь, что тип источника (`type`) соответствует формату данных
- Для JSON проверьте структуру согласно документации
- Для RSS убедитесь в валидности XML

### Медленная загрузка
- Уменьшите количество источников новостей
- Увеличьте интервал обновления (`refresh_interval`)
- Проверьте скорость интернет-соединения

## Логи

Информация о работе веб-контента записывается в основной лог лаунчера. Для отладки полезны сообщения уровня INFO и выше.